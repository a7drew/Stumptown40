<!DOCTYPE html>
<html>
<head>
    <title>SignalR Simple Chat</title>
    <style type="text/css">
        * { font-family: Arial; }
        .container {
            background-color: #99CCFF;
            border: thick solid #808080;
            padding: 20px;
            margin: 20px;
        }
    </style>
</head>
<body>
       
    <div class="container">
        
        <h1>Public Page</h1>

        <ul id="discussion">
        </ul>
    </div>

    <script src="http://stumptown40.cloudapp.net/Scripts/jquery-1.8.2.min.js"></script>
    <script src="http://stumptown40.cloudapp.net/Scripts/jquery.signalR-1.0.0.js"></script>
    <script src="http://stumptown40.cloudapp.net/signalr/hubs"></script>
    <script type="text/javascript">

        // TODO: Load this from a URL when the app launches
        var racerCache = [{ "RacerId": 1, "Name": "FirstName LastName1", "Organization": "Company1 Name Goes Here", "CarUrl": null, "StartSlot": 1 }, { "RacerId": 2, "Name": "FirstName LastName2", "Organization": "Company2 Name Goes Here", "CarUrl": null, "StartSlot": 2 }, { "RacerId": 3, "Name": "FirstName LastName3", "Organization": "Company3 Name Goes Here", "CarUrl": null, "StartSlot": 3 }, { "RacerId": 4, "Name": "FirstName LastName4", "Organization": "Company4 Name Goes Here", "CarUrl": null, "StartSlot": 4 }, { "RacerId": 5, "Name": "FirstName LastName5", "Organization": "Company5 Name Goes Here", "CarUrl": null, "StartSlot": 5 }, { "RacerId": 6, "Name": "FirstName LastName6", "Organization": "Company6 Name Goes Here", "CarUrl": null, "StartSlot": 6 }, { "RacerId": 7, "Name": "FirstName LastName7", "Organization": "Company7 Name Goes Here", "CarUrl": null, "StartSlot": 7 }, { "RacerId": 8, "Name": "FirstName LastName8", "Organization": "Company8 Name Goes Here", "CarUrl": null, "StartSlot": 8 }, { "RacerId": 9, "Name": "FirstName LastName9", "Organization": "Company9 Name Goes Here", "CarUrl": null, "StartSlot": 9 }, { "RacerId": 10, "Name": "FirstName LastName10", "Organization": "Company10 Name Goes Here", "CarUrl": null, "StartSlot": 10 }, { "RacerId": 11, "Name": "FirstName LastName11", "Organization": "Company11 Name Goes Here", "CarUrl": null, "StartSlot": 11 }, { "RacerId": 12, "Name": "FirstName LastName12", "Organization": "Company12 Name Goes Here", "CarUrl": null, "StartSlot": 12 }, { "RacerId": 13, "Name": "FirstName LastName13", "Organization": "Company13 Name Goes Here", "CarUrl": null, "StartSlot": 13 }, { "RacerId": 14, "Name": "FirstName LastName14", "Organization": "Company14 Name Goes Here", "CarUrl": null, "StartSlot": 14 }, { "RacerId": 15, "Name": "FirstName LastName15", "Organization": "Company15 Name Goes Here", "CarUrl": null, "StartSlot": 15 }, { "RacerId": 16, "Name": "FirstName LastName16", "Organization": "Company16 Name Goes Here", "CarUrl": null, "StartSlot": 16 }, { "RacerId": 17, "Name": "FirstName LastName17", "Organization": "Company17 Name Goes Here", "CarUrl": null, "StartSlot": 17 }, { "RacerId": 18, "Name": "FirstName LastName18", "Organization": "Company18 Name Goes Here", "CarUrl": null, "StartSlot": 18 }, { "RacerId": 19, "Name": "FirstName LastName19", "Organization": "Company19 Name Goes Here", "CarUrl": null, "StartSlot": 19 }, { "RacerId": 20, "Name": "FirstName LastName20", "Organization": "Company20 Name Goes Here", "CarUrl": null, "StartSlot": 20 }, { "RacerId": 21, "Name": "FirstName LastName21", "Organization": "Company21 Name Goes Here", "CarUrl": null, "StartSlot": 21 }, { "RacerId": 22, "Name": "FirstName LastName22", "Organization": "Company22 Name Goes Here", "CarUrl": null, "StartSlot": 22 }, { "RacerId": 23, "Name": "FirstName LastName23", "Organization": "Company23 Name Goes Here", "CarUrl": null, "StartSlot": 23 }, { "RacerId": 24, "Name": "FirstName LastName24", "Organization": "Company24 Name Goes Here", "CarUrl": null, "StartSlot": 24 }, { "RacerId": 25, "Name": "FirstName LastName25", "Organization": "Company25 Name Goes Here", "CarUrl": null, "StartSlot": 25 }, { "RacerId": 26, "Name": "FirstName LastName26", "Organization": "Company26 Name Goes Here", "CarUrl": null, "StartSlot": 26 }, { "RacerId": 27, "Name": "FirstName LastName27", "Organization": "Company27 Name Goes Here", "CarUrl": null, "StartSlot": 27 }, { "RacerId": 28, "Name": "FirstName LastName28", "Organization": "Company28 Name Goes Here", "CarUrl": null, "StartSlot": 28 }, { "RacerId": 29, "Name": "FirstName LastName29", "Organization": "Company29 Name Goes Here", "CarUrl": null, "StartSlot": 29 }, { "RacerId": 30, "Name": "FirstName LastName30", "Organization": "Company30 Name Goes Here", "CarUrl": null, "StartSlot": 30 }, { "RacerId": 31, "Name": "FirstName LastName31", "Organization": "Company31 Name Goes Here", "CarUrl": null, "StartSlot": 31 }, { "RacerId": 32, "Name": "FirstName LastName32", "Organization": "Company32 Name Goes Here", "CarUrl": null, "StartSlot": 32 }, { "RacerId": 33, "Name": "FirstName LastName33", "Organization": "Company33 Name Goes Here", "CarUrl": null, "StartSlot": 33 }, { "RacerId": 34, "Name": "FirstName LastName34", "Organization": "Company34 Name Goes Here", "CarUrl": null, "StartSlot": 34 }, { "RacerId": 35, "Name": "FirstName LastName35", "Organization": "Company35 Name Goes Here", "CarUrl": null, "StartSlot": 35 }, { "RacerId": 36, "Name": "FirstName LastName36", "Organization": "Company36 Name Goes Here", "CarUrl": null, "StartSlot": 36 }, { "RacerId": 37, "Name": "FirstName LastName37", "Organization": "Company37 Name Goes Here", "CarUrl": null, "StartSlot": 37 }, { "RacerId": 38, "Name": "FirstName LastName38", "Organization": "Company38 Name Goes Here", "CarUrl": null, "StartSlot": 38 }, { "RacerId": 39, "Name": "FirstName LastName39", "Organization": "Company39 Name Goes Here", "CarUrl": null, "StartSlot": 39 }, { "RacerId": 40, "Name": "FirstName LastName40", "Organization": "Company40 Name Goes Here", "CarUrl": null, "StartSlot": 40 }, { "RacerId": 41, "Name": "FirstName LastName41", "Organization": "Company41 Name Goes Here", "CarUrl": null, "StartSlot": 41 }, { "RacerId": 42, "Name": "FirstName LastName42", "Organization": "Company42 Name Goes Here", "CarUrl": null, "StartSlot": 42 }, { "RacerId": 43, "Name": "FirstName LastName43", "Organization": "Company43 Name Goes Here", "CarUrl": null, "StartSlot": 43 }, { "RacerId": 44, "Name": "FirstName LastName44", "Organization": "Company44 Name Goes Here", "CarUrl": null, "StartSlot": 44 }, { "RacerId": 45, "Name": "FirstName LastName45", "Organization": "Company45 Name Goes Here", "CarUrl": null, "StartSlot": 45 }, { "RacerId": 46, "Name": "FirstName LastName46", "Organization": "Company46 Name Goes Here", "CarUrl": null, "StartSlot": 46 }, { "RacerId": 47, "Name": "FirstName LastName47", "Organization": "Company47 Name Goes Here", "CarUrl": null, "StartSlot": 47 }, { "RacerId": 48, "Name": "FirstName LastName48", "Organization": "Company48 Name Goes Here", "CarUrl": null, "StartSlot": 48 }, { "RacerId": 49, "Name": "FirstName LastName49", "Organization": "Company49 Name Goes Here", "CarUrl": null, "StartSlot": 49 }, { "RacerId": 50, "Name": "FirstName LastName50", "Organization": "Company50 Name Goes Here", "CarUrl": null, "StartSlot": 50 }, { "RacerId": 51, "Name": "FirstName LastName51", "Organization": "Company51 Name Goes Here", "CarUrl": null, "StartSlot": 51 }, { "RacerId": 52, "Name": "FirstName LastName52", "Organization": "Company52 Name Goes Here", "CarUrl": null, "StartSlot": 52 }, { "RacerId": 53, "Name": "FirstName LastName53", "Organization": "Company53 Name Goes Here", "CarUrl": null, "StartSlot": 53 }, { "RacerId": 54, "Name": "FirstName LastName54", "Organization": "Company54 Name Goes Here", "CarUrl": null, "StartSlot": 54 }, { "RacerId": 55, "Name": "FirstName LastName55", "Organization": "Company55 Name Goes Here", "CarUrl": null, "StartSlot": 55 }, { "RacerId": 56, "Name": "FirstName LastName56", "Organization": "Company56 Name Goes Here", "CarUrl": null, "StartSlot": 56 }, { "RacerId": 57, "Name": "FirstName LastName57", "Organization": "Company57 Name Goes Here", "CarUrl": null, "StartSlot": 57 }, { "RacerId": 58, "Name": "FirstName LastName58", "Organization": "Company58 Name Goes Here", "CarUrl": null, "StartSlot": 58 }, { "RacerId": 59, "Name": "FirstName LastName59", "Organization": "Company59 Name Goes Here", "CarUrl": null, "StartSlot": 59 }, { "RacerId": 60, "Name": "FirstName LastName60", "Organization": "Company60 Name Goes Here", "CarUrl": null, "StartSlot": 60 }, { "RacerId": 61, "Name": "FirstName LastName61", "Organization": "Company61 Name Goes Here", "CarUrl": null, "StartSlot": 61 }, { "RacerId": 62, "Name": "FirstName LastName62", "Organization": "Company62 Name Goes Here", "CarUrl": null, "StartSlot": 62 }, { "RacerId": 63, "Name": "FirstName LastName63", "Organization": "Company63 Name Goes Here", "CarUrl": null, "StartSlot": 63 }, { "RacerId": 64, "Name": "FirstName LastName64", "Organization": "Company64 Name Goes Here", "CarUrl": null, "StartSlot": 64 }, { "RacerId": 65, "Name": "FirstName LastName65", "Organization": "Company65 Name Goes Here", "CarUrl": null, "StartSlot": 65 }, { "RacerId": 66, "Name": "FirstName LastName66", "Organization": "Company66 Name Goes Here", "CarUrl": null, "StartSlot": 66 }, { "RacerId": 67, "Name": "FirstName LastName67", "Organization": "Company67 Name Goes Here", "CarUrl": null, "StartSlot": 67 }, { "RacerId": 68, "Name": "FirstName LastName68", "Organization": "Company68 Name Goes Here", "CarUrl": null, "StartSlot": 68 }, { "RacerId": 69, "Name": "FirstName LastName69", "Organization": "Company69 Name Goes Here", "CarUrl": null, "StartSlot": 69 }, { "RacerId": 70, "Name": "FirstName LastName70", "Organization": "Company70 Name Goes Here", "CarUrl": null, "StartSlot": 70 }, { "RacerId": 71, "Name": "FirstName LastName71", "Organization": "Company71 Name Goes Here", "CarUrl": null, "StartSlot": 71 }, { "RacerId": 72, "Name": "FirstName LastName72", "Organization": "Company72 Name Goes Here", "CarUrl": null, "StartSlot": 72 }, { "RacerId": 73, "Name": "FirstName LastName73", "Organization": "Company73 Name Goes Here", "CarUrl": null, "StartSlot": 73 }, { "RacerId": 74, "Name": "FirstName LastName74", "Organization": "Company74 Name Goes Here", "CarUrl": null, "StartSlot": 74 }, { "RacerId": 75, "Name": "FirstName LastName75", "Organization": "Company75 Name Goes Here", "CarUrl": null, "StartSlot": 75 }, { "RacerId": 76, "Name": "FirstName LastName76", "Organization": "Company76 Name Goes Here", "CarUrl": null, "StartSlot": 76 }, { "RacerId": 77, "Name": "FirstName LastName77", "Organization": "Company77 Name Goes Here", "CarUrl": null, "StartSlot": 77 }, { "RacerId": 78, "Name": "FirstName LastName78", "Organization": "Company78 Name Goes Here", "CarUrl": null, "StartSlot": 78 }, { "RacerId": 79, "Name": "FirstName LastName79", "Organization": "Company79 Name Goes Here", "CarUrl": null, "StartSlot": 79 }, { "RacerId": 80, "Name": "FirstName LastName80", "Organization": "Company80 Name Goes Here", "CarUrl": null, "StartSlot": 80 }, { "RacerId": 81, "Name": "FirstName LastName81", "Organization": "Company81 Name Goes Here", "CarUrl": null, "StartSlot": 81 }, { "RacerId": 82, "Name": "FirstName LastName82", "Organization": "Company82 Name Goes Here", "CarUrl": null, "StartSlot": 82 }, { "RacerId": 83, "Name": "FirstName LastName83", "Organization": "Company83 Name Goes Here", "CarUrl": null, "StartSlot": 83 }, { "RacerId": 84, "Name": "FirstName LastName84", "Organization": "Company84 Name Goes Here", "CarUrl": null, "StartSlot": 84 }, { "RacerId": 85, "Name": "FirstName LastName85", "Organization": "Company85 Name Goes Here", "CarUrl": null, "StartSlot": 85 }, { "RacerId": 86, "Name": "FirstName LastName86", "Organization": "Company86 Name Goes Here", "CarUrl": null, "StartSlot": 86 }, { "RacerId": 87, "Name": "FirstName LastName87", "Organization": "Company87 Name Goes Here", "CarUrl": null, "StartSlot": 87 }, { "RacerId": 88, "Name": "FirstName LastName88", "Organization": "Company88 Name Goes Here", "CarUrl": null, "StartSlot": 88 }, { "RacerId": 89, "Name": "FirstName LastName89", "Organization": "Company89 Name Goes Here", "CarUrl": null, "StartSlot": 89 }, { "RacerId": 90, "Name": "FirstName LastName90", "Organization": "Company90 Name Goes Here", "CarUrl": null, "StartSlot": 90 }, { "RacerId": 91, "Name": "FirstName LastName91", "Organization": "Company91 Name Goes Here", "CarUrl": null, "StartSlot": 91 }, { "RacerId": 92, "Name": "FirstName LastName92", "Organization": "Company92 Name Goes Here", "CarUrl": null, "StartSlot": 92 }, { "RacerId": 93, "Name": "FirstName LastName93", "Organization": "Company93 Name Goes Here", "CarUrl": null, "StartSlot": 93 }, { "RacerId": 94, "Name": "FirstName LastName94", "Organization": "Company94 Name Goes Here", "CarUrl": null, "StartSlot": 94 }, { "RacerId": 95, "Name": "FirstName LastName95", "Organization": "Company95 Name Goes Here", "CarUrl": null, "StartSlot": 95 }, { "RacerId": 96, "Name": "FirstName LastName96", "Organization": "Company96 Name Goes Here", "CarUrl": null, "StartSlot": 96 }, { "RacerId": 97, "Name": "FirstName LastName97", "Organization": "Company97 Name Goes Here", "CarUrl": null, "StartSlot": 97 }, { "RacerId": 98, "Name": "FirstName LastName98", "Organization": "Company98 Name Goes Here", "CarUrl": null, "StartSlot": 98 }, { "RacerId": 99, "Name": "FirstName LastName99", "Organization": "Company99 Name Goes Here", "CarUrl": null, "StartSlot": 99 }, { "RacerId": 100, "Name": "FirstName LastName100", "Organization": "Company100 Name Goes Here", "CarUrl": null, "StartSlot": 100 }];

        $(function () {

            // Declare a proxy to reference the hub. 
            $.support.cors = true;
            $.connection.hub.url = 'http://stumptown40.cloudapp.net/signalr';

            var chat = $.connection.navigationHub;

            // Create a function that the hub can call to broadcast messages.
            chat.client.onNavigate = function (viewName, jsonData) {

                var encodedName = $('<div />').text(viewName).html();
                var encodedMsg = $('<div />').text(jsonData).html();

                $('#discussion').append('<li><strong>' + encodedName + '</strong>:&nbsp;&nbsp;' + encodedMsg + '</li>');
            };

            $.getJSON('http://stumptown40.cloudapp.net/api/racers?callback=?', function(e) {
                $('#discussion').append('<li><strong>' + e.length + ' racers received, the name of the first racer is ' + e[0].Name + '.</strong></li>');
            });
            
            // Start the connection.
            $.connection.hub.start().done(function () {
                $('#discussion').append('<li><strong>Ready to receive messages.</strong></li>');
            });
        });

    </script>

</body>
</html>